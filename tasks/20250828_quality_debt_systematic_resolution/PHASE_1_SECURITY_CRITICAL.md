/sc:implement --seq --validate --evidence --no-speculation
"Phase 1: ë³´ì•ˆ ìœ„í—˜ í•´ê²° - API Routes ì„¸ì…˜ ì²´í¬ ëˆ„ë½ í•´ê²° - 30ë¶„ ì´ë‚´ ì™„ë£Œ"

# Phase 1/3: ë³´ì•ˆ ìœ„í—˜ í•´ê²°

âš ï¸ **ì ˆëŒ€ ì¤€ìˆ˜ì‚¬í•­**
- [ ] ì¶”ì¸¡ ê¸ˆì§€ - ëª¨ë“  ê²ƒì„ í™•ì¸ í›„ ì§„í–‰
- [ ] ì„ì‹œë°©í¸ ê¸ˆì§€ - TODO, any, ì£¼ì„ì²˜ë¦¬ ì ˆëŒ€ ê¸ˆì§€
- [ ] í…ŒìŠ¤íŠ¸ í•„ìˆ˜ - ì‘ë™ í™•ì¸ ì—†ì´ ì™„ë£Œ ë³´ê³  ê¸ˆì§€

## ğŸ“ í˜„ì¬ ìƒíƒœ í™•ì¸ (í•„ìˆ˜ ì‹¤í–‰)

### íŒŒì¼ ì¡´ì¬ í™•ì¸

```bash
# API Routes ì „ì²´ ëª©ë¡ í™•ì¸ (ì¶”ì¸¡ ê¸ˆì§€)
find src/app/api -name "route.ts" -type f

# ì„¸ì…˜ ì²´í¬ ëˆ„ë½ API ì‹ë³„
find src/app/api -name "route.ts" -exec grep -L "getUser()" {} \; > missing-auth-routes.txt

# ëˆ„ë½ëœ routes ê°œìˆ˜ í™•ì¸
wc -l missing-auth-routes.txt
```

### í˜„ì¬ êµ¬í˜„ í™•ì¸

```bash
# í‘œì¤€ ì¸ì¦ íŒ¨í„´ í™•ì¸ (ê¸°ì¡´ ì˜¬ë°”ë¥¸ íŒ¨í„´)
grep -A 10 -B 5 "getUser()" src/app/api/user/profile/route.ts

# ì„¸ì…˜ ì²´í¬ ì—†ëŠ” ë³´í˜¸ë˜ì–´ì•¼ í•  API í™•ì¸
cat missing-auth-routes.txt | head -5
```

### ì˜ì¡´ì„± í™•ì¸

```bash
# Supabase í´ë¼ì´ì–¸íŠ¸ import íŒ¨í„´ í™•ì¸
grep -r "createSupabaseRouteHandlerClient" src/app/api/ --include="*.ts" | head -3

# í‘œì¤€ ì—ëŸ¬ ì‘ë‹µ íŒ¨í„´ í™•ì¸  
grep -r "User not authenticated" src/app/api/ --include="*.ts" | head -3
```

âŒ **í™•ì¸ ì‹¤íŒ¨ ì‹œ** â†’ ì¦‰ì‹œ ì¤‘ë‹¨ ë° ë³´ê³ 

## ğŸ”§ ìˆ˜ì • ì‘ì—… (ì •í™•í•œ ìœ„ì¹˜)

### ğŸš¨ ê°•ì œ ì²´í¬í¬ì¸íŠ¸ CP1: ì‹œì‘ ì „
- [ ] missing-auth-routes.txt íŒŒì¼ ìƒì„± í™•ì¸
- [ ] í‘œì¤€ ì¸ì¦ íŒ¨í„´ íŒŒì•… ì™„ë£Œ
- [ ] ìˆ˜ì • ëŒ€ìƒ API ìš°ì„ ìˆœìœ„ ê²°ì • (ìµœëŒ€ 5ê°œ)

### ìš°ì„ ìˆœìœ„ API Routes ìˆ˜ì •

#### íŒŒì¼ 1: src/app/api/certificates/route.ts
**í˜„ì¬ ìƒíƒœ í™•ì¸**
```bash
cat -n src/app/api/certificates/route.ts | sed -n '1,30p'
```

**ë¼ì¸ 19-25 ìˆ˜ì • ì˜ˆìƒ (ì‹¤ì œ í™•ì¸ í›„ ìˆ˜ì •)**
```typescript
// í˜„ì¬ ì½”ë“œ (í™•ì¸ í›„ ì •í™•íˆ ì´ ì½”ë“œì—¬ì•¼ í•¨)
export async function GET(request: NextRequest): Promise<NextResponse> {
  try {
    const supabase = await createSupabaseRouteHandlerClient();
    
    // ğŸ“ ì—¬ê¸°ì— ì„¸ì…˜ ì²´í¬ ëˆ„ë½ - ì¶”ê°€ í•„ìš”

// ìˆ˜ì • í›„ (ì •í™•íˆ ì´ë ‡ê²Œ ë³€ê²½)
export async function GET(request: NextRequest): Promise<NextResponse> {
  try {
    const supabase = await createSupabaseRouteHandlerClient();
    
    // ğŸ”´ í•„ìˆ˜: ì„¸ì…˜ ì²´í¬ ì¶”ê°€
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
      return NextResponse.json(
        { error: 'User not authenticated' },
        { status: 401 }
      );
    }
```

**ìˆ˜ì • ì´ìœ **: ì‚¬ìš©ìê°€ ì¸ì¦ì„œ ëª©ë¡ì„ ì¡°íšŒí•  ë•Œ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡

#### íŒŒì¼ 2: src/app/api/revenue-proof/route.ts
**í˜„ì¬ ìƒíƒœ í™•ì¸**
```bash
cat -n src/app/api/revenue-proof/route.ts | sed -n '1,30p'
```

**ì„¸ì…˜ ì²´í¬ íŒ¨í„´ ì¶”ê°€ (ì •í™•í•œ ë¼ì¸ì€ íŒŒì¼ í™•ì¸ í›„ ê²°ì •)**

âš ï¸ **ìˆ˜ì • ê¸ˆì§€ ì‚¬í•­**
- any íƒ€ì… ì‚¬ìš© â†’ íƒ€ì… ì˜¤ë¥˜ ë°œìƒ ì‹œ ì •í™•í•œ íƒ€ì… ì°¾ê¸°
- TODO ì£¼ì„ â†’ ì™„ì „íˆ êµ¬í˜„í•˜ê±°ë‚˜ ì‚­ì œ
- try-catchë¡œ ì—ëŸ¬ ìˆ¨ê¸°ê¸° â†’ ê·¼ë³¸ ì›ì¸ í•´ê²°

## ğŸ” ê²€ì¦ ë‹¨ê³„ (í•„ìˆ˜)

### ğŸš¨ ê°•ì œ ì²´í¬í¬ì¸íŠ¸ CP2: ìˆ˜ì • ì¤‘
- [ ] ì •í™•í•œ ë¼ì¸ ë²ˆí˜¸ ëª…ì‹œ
- [ ] any íƒ€ì… 0ê°œ
- [ ] TODO ì£¼ì„ 0ê°œ
- [ ] ì„¸ì…˜ ì²´í¬ íŒ¨í„´ ì •í™•íˆ ì ìš©

### 1. ì»´íŒŒì¼ ê²€ì¦
```bash
# íƒ€ì… ì²´í¬ (ì—ëŸ¬ 0ê°œ í•„ìˆ˜)
npm run types:check
# ì‹¤íŒ¨ ì‹œ â†’ ìˆ˜ì • ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸°

# ë¹Œë“œ í™•ì¸  
npm run build
# ì‹¤íŒ¨ ì‹œ â†’ ì—ëŸ¬ ë©”ì‹œì§€ ê¸°ë¡ í›„ ìˆ˜ì •
```

### 2. ì‹¤ì œ ë™ì‘ ê²€ì¦
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

**ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] http://localhost:3000 ì ‘ì†
- [ ] ë¡œê·¸ì•„ì›ƒ ìƒíƒœì—ì„œ /api/certificates ì§ì ‘ í˜¸ì¶œ â†’ 401 ì‘ë‹µ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ í›„ /api/certificates í˜¸ì¶œ â†’ 200 ì‘ë‹µ í™•ì¸
- [ ] Console ì—ëŸ¬ 0ê°œ í™•ì¸ (F12)
- [ ] Network íƒ­ì—ì„œ ì¸ì¦ í—¤ë” í™•ì¸

### 3. ë°ì´í„° ê²€ì¦
```bash
# API ì‘ë‹µ êµ¬ì¡° í™•ì¸
curl -X GET http://localhost:3000/api/certificates

# ë¡œê·¸ì¸ ìƒíƒœì—ì„œ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸
# (ê°œë°œì ë„êµ¬ Network íƒ­ì—ì„œ Bearer token ë³µì‚¬ í›„ í…ŒìŠ¤íŠ¸)
```

### ğŸš¨ ê°•ì œ ì²´í¬í¬ì¸íŠ¸ CP3: ìˆ˜ì • í›„
- [ ] npm run types:check í†µê³¼
- [ ] npm run build ì„±ê³µ
- [ ] ë¸Œë¼ìš°ì € ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] ì¸ì¦/ë¹„ì¸ì¦ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ í™•ì¸

âŒ **ê²€ì¦ ì‹¤íŒ¨** â†’ Phase ì‹¤íŒ¨ ë³´ê³  ë° ì¤‘ë‹¨
âœ… **ê²€ì¦ ì„±ê³µ** â†’ Phase 2 ì§„í–‰ ê°€ëŠ¥

## âœ… Phase 1 ì™„ë£Œ ì¡°ê±´

### í•„ìˆ˜ (í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ ë¯¸ì™„ë£Œ)
- [ ] ì»´íŒŒì¼ ì—ëŸ¬ 0ê°œ
- [ ] ëŸ°íƒ€ì„ ì—ëŸ¬ 0ê°œ  
- [ ] ë³´ì•ˆ ê²½ê³  80ê°œ â†’ 40ê°œ ì´í•˜ ê°ì†Œ í™•ì¸
- [ ] Console ì—ëŸ¬ 0ê°œ
- [ ] ì¸ì¦/ë¹„ì¸ì¦ ì‹œë‚˜ë¦¬ì˜¤ ì •ìƒ ë™ì‘

### ì¦ê±° ìˆ˜ì§‘
- ìŠ¤í¬ë¦°ìƒ·: API 401/200 ì‘ë‹µ í™”ë©´
- ë¡œê·¸: ì„¸ì…˜ ì²´í¬ ë™ì‘ ë¡œê·¸
- ê²€ì¦: `npm run verify:security` ì‹¤í–‰ ê²°ê³¼

### ì„±ê³¼ ì¸¡ì •
```bash
# Phase 1 ì™„ë£Œ í›„ ë³´ì•ˆ ê²½ê³  ìˆ˜ ì¸¡ì •
npm run verify:security 2>&1 | grep -o '[0-9]\+ security warnings' | grep -o '[0-9]\+'

# ëª©í‘œ: 80ê°œ â†’ 40ê°œ ì´í•˜
```

### ë‹¤ìŒ Phase ì§„í–‰ ê°€ëŠ¥ ì—¬ë¶€
- âœ… ëª¨ë“  í•„ìˆ˜ ì¡°ê±´ ì¶©ì¡± â†’ Phase 2 ì§„í–‰
- âŒ ì¡°ê±´ ë¯¸ì¶©ì¡± â†’ ìˆ˜ì • í›„ ì¬ê²€ì¦

## â›” ì ˆëŒ€ ê¸ˆì§€ (í•˜ë‚˜ë¼ë„ ìœ„ë°˜ ì‹œ STOP)

1. **ì¶”ì¸¡ ê¸ˆì§€**
   - âŒ "ì•„ë§ˆ ì´ íŒŒì¼ì¼ ê²ƒì´ë‹¤"
   - âŒ "ì´ íŒ¨í„´ì„ ì“¸ ê²ƒ ê°™ë‹¤"
   - âœ… grep/catìœ¼ë¡œ í™•ì¸ í›„ ì§„í–‰

2. **ì„ì‹œë°©í¸ ê¸ˆì§€**
   - âŒ // TODO: ë‚˜ì¤‘ì— ì„¸ì…˜ ì²´í¬ ì¶”ê°€
   - âŒ as any
   - âŒ // @ts-ignore
   - âœ… ì™„ì „íˆ í•´ê²°í•˜ê±°ë‚˜ ë³´ê³ 

3. **ê²€ì¦ ìƒëµ ê¸ˆì§€**
   - âŒ "ë¹Œë“œ ëìœ¼ë‹ˆ ë  ê±°ì•¼"
   - âŒ "íƒ€ì… ì—ëŸ¬ ì—†ìœ¼ë‹ˆ OK"  
   - âœ… ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì œ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸

4. **ëŒ€ì¶© ë„˜ì–´ê°€ê¸° ê¸ˆì§€**
   - âŒ ì—ëŸ¬ ë‚˜ë„ ë‹¤ìŒ ì‘ì—…
   - âŒ ì¼ë¶€ë§Œ ë˜ë„ ì™„ë£Œ
   - âœ… 100% ì‘ë™ í™•ì¸ í›„ ì§„í–‰

**í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ â†’ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ë¶ˆê°€**