# 🎯 AI 개발 지시서 작성 가이드 v17.0 (실제 작동 중심)

**📌 이 문서의 목적**: 개발 지식이 없는 사용자의 요청을 받은 AI가, 다른 AI에게 전달할 **실제로 작동하는 기능을 구현하는 지시서**를 작성하는 방법을 안내합니다.

**🔥 핵심 목표**: 
## **"코드 작성이 목표가 아니다. 실제로 작동하는 사이트가 목표다!"**

**🤖 당신(AI)의 역할**: 
1. 사용자의 의도를 정확히 파악
2. 프로젝트 구조를 이해
3. 필요한 파일과 정보를 찾아서
4. **실행 AI가 실제로 작동하는 기능을 구현**할 수 있는 지시서 작성
5. **브라우저에서 실제 테스트 가능한** 시나리오 포함
6. 프로젝트 특화 규칙을 Context 없는 AI에게 전달
7. SuperClaude 명령어를 최상단에 배치
8. 대규모 작업은 폴더 구조로 체계적 관리
9. **임시방편 절대 금지 - 문제 발견 시 완전히 해결**
10. **npm run dev 실행 후 실제 동작 확인 필수**

---

## 🔥🔥🔥 최우선 프로젝트 특화 규칙 (모든 지시서 필수) 🔥🔥🔥

### ⚠️ 경고: 이 섹션 미확인 시 프로젝트 파괴 가능성 90%

#### 📌 필수 확인 문서 체크리스트
```markdown
- [ ] `/docs/CONTEXT_BRIDGE.md` - 프로젝트 특화 규칙 (전체 읽기 필수)
- [ ] `/CLAUDE.md` 17-43행 - 자동 스크립트 절대 금지
- [ ] `/CLAUDE.md` 352-410행 - Supabase 클라이언트 패턴
- [ ] `/CLAUDE.md` 54-71행 - 절대 금지사항 목록
- [ ] `/docs/ERROR_BOUNDARY.md` - 에러 처리 표준 패턴
```

#### 🚫 프로젝트 금지사항 (절대 위반 불가)
```markdown
- [ ] 자동 변환 스크립트 생성 금지 (38개 스크립트 재앙 경험)
- [ ] 구식 Supabase 패턴 사용 금지 (createServerComponentClient 등)
- [ ] database.generated.ts 직접 import 금지
- [ ] any 타입 사용 금지
- [ ] fetch() 직접 호출 금지
- [ ] getSession() 사용 금지 (getUser() 사용)
- [ ] 임시방편 해결책 사용 금지 (주석 처리, TODO, 빈 배열 반환 등)
- [ ] 에러 발생 시 작업 진행 금지 (완전 해결 후 진행)
- [ ] 실제 테스트 없이 완료 보고 금지
```

#### 🎯 실제 작동 검증 필수 - 7단계 시나리오

##### 📊 3단계 우선순위 시스템
- **🔴 필수 (MUST)**: 기본 작동 - 실패 시 작업 중단
- **🟡 권장 (SHOULD)**: 품질 보증 - 사용자 경험 향상
- **🟢 선택 (NICE)**: 추가 품질 - 완성도 향상

##### ✅ 시나리오 1: UI 렌더링 검증
```bash
# 🔴 필수 검증
- [ ] 페이지가 에러 없이 로드되는가?
- [ ] 모든 컴포넌트가 화면에 표시되는가?
- [ ] Tailwind CSS 스타일이 적용되는가?

# 🟡 권장 검증
- [ ] 반응형 디자인이 작동하는가? (모바일/태블릿/데스크톱)
- [ ] 다크모드 지원이 되는가?
- [ ] 스켈레톤 UI가 로딩 중에 표시되는가?

# 🟢 선택 검증
- [ ] 애니메이션이 부드럽게 작동하는가?
- [ ] 폰트가 제대로 로드되는가?
```

##### ✅ 시나리오 2: 사용자 인터랙션 검증
```bash
# 🔴 필수 검증
- [ ] 버튼 클릭이 작동하는가?
- [ ] 링크 이동이 되는가?
- [ ] 폼 입력이 가능한가?

# 🟡 권장 검증
- [ ] 호버 효과가 표시되는가?
- [ ] 포커스 상태가 명확한가?
- [ ] 터치 이벤트가 모바일에서 작동하는가?

# 🟢 선택 검증
- [ ] 드래그 앤 드롭이 작동하는가?
- [ ] 키보드 단축키가 작동하는가?
```

##### ✅ 시나리오 3: 데이터 플로우 검증
```bash
# 🔴 필수 검증
- [ ] API 호출이 성공하는가?
- [ ] 데이터가 화면에 표시되는가?
- [ ] 상태 변경이 UI에 반영되는가?

# 🟡 권장 검증
- [ ] 로딩 상태가 표시되는가?
- [ ] 빈 상태 메시지가 표시되는가?
- [ ] 페이지네이션이 작동하는가?

# 🟢 선택 검증
- [ ] 낙관적 업데이트가 작동하는가?
- [ ] 캐싱이 효과적으로 작동하는가?
```

##### ✅ 시나리오 4: 에러 처리 검증
```bash
# 🔴 필수 검증
- [ ] 네트워크 오류 시 에러 메시지가 표시되는가?
- [ ] 입력 검증 실패 시 피드백이 제공되는가?
- [ ] 앱이 크래시하지 않는가?

# 🟡 권장 검증
- [ ] 토스트 메시지가 표시되는가?
- [ ] 재시도 버튼이 제공되는가?
- [ ] 에러 바운더리가 작동하는가?

# 🟢 선택 검증
- [ ] 에러 로깅이 되는가?
- [ ] 사용자 친화적 메시지가 표시되는가?
```

##### ✅ 시나리오 5: 성능 검증
```bash
# 🔴 필수 검증
- [ ] 페이지 로드 시간 < 5초
- [ ] 버튼 클릭 반응 < 300ms
- [ ] 메모리 누수가 없는가?

# 🟡 권장 검증
- [ ] FCP (First Contentful Paint) < 2초
- [ ] 이미지 lazy loading이 작동하는가?
- [ ] 번들 사이즈 < 500KB

# 🟢 선택 검증
- [ ] Lighthouse 점수 > 80
- [ ] Core Web Vitals 통과
```

##### ✅ 시나리오 6: Dhacle 핵심 기능 검증
```bash
# 🔴 YouTube Lens 필수
- [ ] YouTube 검색 → 결과 표시 → 상세보기 작동
- [ ] 채널 분석 데이터가 표시되는가?
- [ ] 영상 메트릭이 정확한가?

# 🔴 수익 인증 필수
- [ ] 수익 인증 생성 → 이미지 업로드 → 저장 작동
- [ ] 월별 통계가 표시되는가?
- [ ] 공유 기능이 작동하는가?

# 🔴 커뮤니티 필수
- [ ] 게시글 작성 → 수정 → 삭제 작동
- [ ] 댓글 기능이 작동하는가?
- [ ] 좋아요가 반영되는가?

# 🔴 결제 필수
- [ ] 상품 선택 → 결제 진행 → 완료 플로우 작동
- [ ] 결제 실패 처리가 되는가?
```

##### ✅ 시나리오 7: 실제 사용자 플로우 검증
```bash
# 전체 사용자 여정 테스트
1. 회원가입/로그인
   - [ ] 카카오 로그인 작동
   - [ ] 세션 유지되는가?

2. 메인 기능 사용
   - [ ] YouTube Lens 검색 및 분석
   - [ ] 수익 인증 작성 및 공유
   - [ ] 커뮤니티 활동

3. 부가 기능
   - [ ] 프로필 수정
   - [ ] 알림 확인
   - [ ] 설정 변경

# 실제 명령어 실행
npm run dev
# 브라우저: http://localhost:3000
# 개발자 도구 콘솔 확인
# 네트워크 탭 확인
# React Query DevTools 확인
```

##### 🚨 검증 실패 시 대응
```markdown
1. 🔴 필수 실패 → 즉시 중단 → 완전 해결 후 진행
2. 🟡 권장 실패 → 기록 → 다음 작업에서 개선
3. 🟢 선택 실패 → 기록 → 향후 개선 사항으로 관리
```

#### 🔍 작업 전 필수 검증 명령어
```bash
# 최신 패턴 확인
grep -r "createSupabaseServerClient" src/

# 금지 패턴 검사
grep -r "createServerComponentClient" src/  # 0개여야 함
grep -r ": any" src/ --include="*.ts"      # 0개여야 함

# 자동 스크립트 존재 확인
ls scripts/fix-*.js 2>/dev/null  # 없어야 함

# 빌드 및 타입 체크
npm run build
npm run types:check
```

#### 🚨 E2E 테스트 에러 감지 (2025-01-31 추가)
```bash
# E2E 테스트 시 런타임 에러 즉시 감지
- [ ] errorSafeTest 사용으로 변환
- [ ] Console 에러 리스너 설정
- [ ] JavaScript 런타임 에러 감지
- [ ] Next.js 에러 오버레이 감지
- [ ] Error Boundary 활성화 감지

# 에러 감지 테스트 예시
import { errorSafeTest, withErrorContext } from './e2e/helpers/error-detector';

errorSafeTest('기능 테스트', async ({ page, errorDetector }) => {
  await withErrorContext(errorDetector, '작업 설명', async () => {
    await page.goto('/');
    // 에러 발생 시 즉시 테스트 중단
  });
});
```

#### 📚 프로젝트 핵심 정보
- **프레임워크**: Next.js 15.4.6 (App Router)
- **데이터베이스**: Supabase
- **스타일링**: Tailwind CSS (다른 방식 금지)
- **인증**: Supabase Auth (getUser() 사용)
- **타입 관리**: @/types에서만 import

---

## 🚨 v17.0 핵심 개선사항 (Phase 2 실패 교훈 반영)

### 🎯 지시서 작성 시 명령어 위치

**모든 지시서는 다음 형식으로 시작:**
```markdown
/sc:[command] --[flags]
"[구체적 실행 지시]"

# [지시서 제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인
[이하 내용...]
```

### 📂 폴더 구조 결정 기준

| 기준 | 단일 파일 | 폴더 구조 (필수) |
|------|-----------|------------------|
| Phase 수 | < 3개 | ≥ 3개 |
| 작업 시간 | < 2시간 | ≥ 2시간 |
| 파일 수 | < 10개 | ≥ 10개 |
| 코드 라인 | < 500줄 | ≥ 500줄 |
| 세션 횟수 | 1회 | 여러 세션 |

**대규모 작업 시 필수 폴더 구조:**
```
docs/
└── [project-name]/              # 프로젝트 전용 폴더
    ├── README.md                # 전체 개요 및 진입점
    ├── PHASE_1_[NAME].md       # Phase 1 상세
    ├── PHASE_2_[NAME].md       # Phase 2 상세
    └── PHASE_3_[NAME].md       # Phase 3 상세
```

---

## 🆕 지시서 표준 템플릿

### 📄 마스터 템플릿

```markdown
/sc:[command] --[flags]
"[구체적 실행 지시]"

# [지시서 제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인

## 📚 온보딩 섹션

### 작업 관련 경로
- 페이지: `src/app/(pages)/[경로]/page.tsx`
- 컴포넌트: `src/components/[경로]/`
- API: `src/app/api/[경로]/route.ts`
- 타입: `src/types/index.ts`

### 프로젝트 컨텍스트 확인
\`\`\`bash
# 기술 스택 확인
cat package.json | grep -A 5 "dependencies"

# 프로젝트 구조 확인  
ls -la src/

# 최신 변경사항 확인
cat /docs/PROJECT.md | grep -A 10 "최근 변경"
\`\`\`

### 🔥 실제 코드 패턴 확인 (v17.0 신규)
\`\`\`bash
# API 클라이언트 패턴 확인
grep -r "apiClient\." src/ --include="*.ts" --include="*.tsx" | head -5
grep -r "apiGet\|apiPost" src/ --include="*.ts" --include="*.tsx" | head -5

# 현재 사용 중인 import 패턴 확인
grep -r "import.*from '@/lib/api-client'" src/ | head -5

# 금지 패턴 사용 여부 확인
grep -r "fetch(" src/ --include="*.ts" --include="*.tsx" | grep -v "//"

# 기존 구현 확인
ls -la src/lib/api-client.ts
cat src/hooks/CLAUDE.md | grep -A 10 "API"
\`\`\`

## 📌 목적
[지시서의 목적 설명]

## 🤖 실행 AI 역할
[AI가 수행할 역할 명세]

## 📝 작업 내용
[구체적 작업 단계]

## ✅ 완료 조건
- [ ] 기능 완전 작동 (빌드 성공이 아닌 실제 동작)
- [ ] 타입 안정성 (any 타입 0개)
- [ ] 프로젝트 규칙 준수
- [ ] 테스트 통과
- [ ] 문서 업데이트

## 📋 QA 테스트 시나리오
### 정상 플로우
[Happy Path 테스트]

### 실패 시나리오
[예외 처리 테스트]

### 성능 측정
[Core Web Vitals 기준]

## 🔄 롤백 계획
\`\`\`bash
# 실패 시 롤백 명령어
[구체적 롤백 절차]
\`\`\`
```

---

## 🚫 절대 금지사항 (Claude Code 나쁜 습관)

1. **추측하지 마세요** → 실제 파일을 확인하고 작성
2. **대충 넘기지 마세요** → 모든 단계를 구체적으로 작성
3. **추상적으로 쓰지 마세요** → 실제 경로를 찾아 작성
4. **생략하지 마세요** → "..." 대신 전체 코드 포함
5. **거짓말하지 마세요** → 모르면 "확인 필요"라고 작성
6. **프로젝트 특화 규칙 무시 금지** → CONTEXT_BRIDGE.md 반드시 확인
7. **명령어를 중간에 넣지 마세요** → SuperClaude 명령어는 항상 최상단
8. **대규모 작업을 단일 파일로 만들지 마세요** → 폴더 구조 사용
9. **임시방편으로 회피하지 마세요** → 문제의 근본 원인을 찾아 완전히 해결
10. **이론적 패턴을 가정하지 마세요** → 실제 프로젝트 코드 확인 (v17.0 신규)

---

## 📋 지시서 작성 8단계 프로세스 (v17.0 강화)

### 🔥 Step 0: 프로젝트 학습 & 실제 코드 확인 (강화)

#### 필수 학습 체크리스트
```markdown
- [ ] 관련 CLAUDE.md 파일 전체 읽기
  - [ ] src/hooks/CLAUDE.md - API 사용 패턴
  - [ ] src/components/CLAUDE.md - 컴포넌트 패턴
  - [ ] src/app/api/CLAUDE.md - API Route 패턴
  
- [ ] 실제 코드 패턴 확인
  - [ ] grep으로 현재 사용 중인 함수/클래스 확인
  - [ ] import 패턴 확인
  - [ ] 기존 구현 파일 확인
  
- [ ] Git 히스토리 확인
  - [ ] 최근 변경사항 확인
  - [ ] 관련 파일 수정 이력 확인
```

#### 실제 코드 확인 명령어 (필수 실행)
```bash
# Step 0-1: 현재 API 패턴 확인
echo "=== API 패턴 확인 ==="
grep -r "apiClient\." src/ --include="*.ts" --include="*.tsx" | wc -l
grep -r "apiGet\|apiPost\|apiPut\|apiDelete" src/ --include="*.ts" --include="*.tsx" | wc -l

# Step 0-2: Import 패턴 확인
echo "=== Import 패턴 확인 ==="
grep -r "import.*from '@/lib/api-client'" src/ | head -10

# Step 0-3: 기존 구현 확인
echo "=== 기존 구현 확인 ==="
ls -la src/lib/ | grep -E "(api|client)"
ls -la src/hooks/queries/ | head -10

# Step 0-4: 프로젝트 표준 확인
echo "=== 프로젝트 표준 확인 ==="
cat src/hooks/CLAUDE.md | grep -A 20 "기본 사용"
```

### Step 1: SuperClaude 명령어 결정

#### 작업 유형별 명령어 매핑
| 작업 유형 | 추천 명령어 | 필수 플래그 | 선택 플래그 |
|---------|------------|------------|------------|
| 버그 수정 | /sc:troubleshoot | --seq --validate | --think |
| UI 개선 | /sc:improve | --magic --c7 | --validate |
| 기능 추가 | /sc:implement | --seq --validate | --c7 --think |
| 검증/감사 | /sc:analyze | --seq --validate | --ultrathink |
| 리팩토링 | /sc:improve | --seq --think | --validate |
| 문서 작성 | /sc:document | --persona-scribe | --c7 |

#### 복잡도 기반 플래그 선택
- **Simple** (< 3 파일): `--validate`
- **Moderate** (3-10 파일): `--seq --think --validate`
- **Complex** (> 10 파일): `--seq --ultrathink --delegate files --validate`
- **Enterprise** (전체 시스템): `--seq --ultrathink --all-mcp --wave-mode`

### Step 2: 사용자 요청 분석

```markdown
사용자 요청: "[원본 요청]"

분석 결과:
- 문제 위치: [구체적 위치]
- 문제 기능: [기능명]
- 문제 유형: [버그/개선/추가]
- 작업 규모: [Simple/Moderate/Complex/Enterprise]
- 구조 결정: [단일 파일/폴더 구조]
```

### Step 3: 프로젝트 구조 파악 & 실제 코드 확인

```bash
# 관련 파일 찾기
find src -name "*[관련키워드]*"
grep -r "[키워드]" src --include="*.tsx" --include="*.ts"

# API 라우트 확인
ls -la src/app/api/[관련경로]/

# 타입 정의 확인
grep -r "[타입명]" src/types/ --include="*.ts"

# 🔥 실제 사용 패턴 확인 (v17.0 필수)
grep -r "[함수명]" src/ --include="*.ts" --include="*.tsx" | head -20
git log --oneline -10 [파일경로]
```

### Step 4: 필수 확인 사항 정리

```markdown
필수 확인 파일:
1. ⚠️ 상단 '최우선 프로젝트 특화 규칙' 확인
2. 페이지: [실제 경로]
3. 컴포넌트: [실제 경로]
4. API: [실제 경로]
5. 타입: [실제 경로]

🔥 실제 코드 패턴 확인 결과 (v17.0):
- 현재 API 패턴: [apiClient.method() 또는 apiGet/apiPost]
- Import 방식: [확인된 import 패턴]
- 기존 구현: [파일 존재 여부 및 내용]

금지사항 재확인:
- [ ] 모든 프로젝트 금지사항 준수
```

### Step 5: 실행 단계 작성

```markdown
실행 단계:
0. ⚠️ 상단 '최우선 프로젝트 특화 규칙' 확인
1. [구체적 작업 1]
   - 파일: [경로]
   - 수정: [내용]
   - 🔥 실제 패턴 사용: [확인된 패턴 명시]
2. [구체적 작업 2]
   - 파일: [경로]
   - 수정: [내용]
   - 🔥 실제 패턴 사용: [확인된 패턴 명시]
```

### Step 6: 검증 기준 작성 (실제 작동 중심)

```markdown
🔴 필수 검증 (하나라도 실패 시 작업 중단):
1. 빌드 및 타입 체크
   - [ ] npm run build 성공
   - [ ] npm run types:check 에러 0개
   - [ ] npx biome check 통과

2. 실제 작동 테스트
   - [ ] npm run dev 실행 → 에러 없음
   - [ ] 브라우저 콘솔 → 에러 0개
   - [ ] 작업한 기능 클릭 → 실제 동작
   - [ ] 네트워크 탭 → API 호출 성공 (200/201)
   - [ ] DB 확인 → 데이터 실제 저장됨

3. 프로젝트 규칙 준수
   - [ ] any 타입 사용 0개
   - [ ] getUser() 사용 (getSession() 금지)
   - [ ] @/types에서만 import
   - [ ] 임시방편 코드 0개

🟡 권장 검증:
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시
- [ ] 반응형 디자인 확인
- [ ] React Query DevTools에서 캐싱 확인
```

### Step 7: QA 테스트 시나리오 (실제 브라우저 테스트)

#### 🔴 필수: 실제 사용자 플로우 테스트
```markdown
# 1. 개발 서버 실행
npm run dev

# 2. 브라우저 테스트 (http://localhost:3000)
정상 플로우:
1. 페이지 접속 → 로드 완료 확인
2. 기능 실행:
   - [ ] 버튼 클릭 → 실제 동작
   - [ ] 데이터 입력 → 저장 확인
   - [ ] 결과 표시 → 화면에 렌더링
3. 개발자 도구 확인:
   - [ ] Console: 에러 0개
   - [ ] Network: API 200/201 응답
   - [ ] React DevTools: 상태 업데이트 확인

# 3. 실패 시나리오 테스트
에러 케이스:
1. 네트워크 끊김 → 에러 메시지 표시 확인
2. 잘못된 입력 → 검증 메시지 표시 확인
3. 권한 없음 → 401 처리 확인
```

#### 🔴 필수: Dhacle 핵심 기능별 테스트
```markdown
YouTube Lens:
- [ ] 검색어 입력 → 검색 버튼 클릭 → 결과 표시
- [ ] 영상 클릭 → 상세 정보 표시
- [ ] 채널 분석 → 메트릭 표시

수익 인증:
- [ ] 작성 버튼 → 폼 입력 → 이미지 업로드 → 저장
- [ ] 목록 조회 → 필터링 → 상세 보기
- [ ] 공유 버튼 → URL 복사 확인

커뮤니티:
- [ ] 게시글 작성 → 저장 → 목록에 표시
- [ ] 댓글 작성 → 실시간 반영
- [ ] 좋아요 클릭 → 카운트 증가
```

#### 🟡 권장: 엣지 케이스 체크리스트
| 테스트 항목 | 실제 테스트 방법 | 예상 결과 | 확인 |
|------------|----------------|-----------|------|
| 빈 입력 | 폼 빈 채로 제출 | "필수 입력" 메시지 | ☐ |
| 긴 텍스트 | 1000자 입력 | 정상 저장 또는 제한 메시지 | ☐ |
| 특수문자 | `<script>alert(1)</script>` 입력 | 텍스트로만 표시 | ☐ |
| 동시 클릭 | 버튼 연속 클릭 | 중복 방지 | ☐ |
| 느린 네트워크 | DevTools → Slow 3G | 로딩 표시 | ☐ |

#### 🟢 선택: 성능 측정
```markdown
# Chrome DevTools → Lighthouse
- [ ] Performance: > 70
- [ ] Accessibility: > 80
- [ ] Best Practices: > 80
- [ ] SEO: > 80

# Network 탭
- [ ] 초기 로드: < 3초
- [ ] API 응답: < 500ms
- [ ] 이미지: lazy loading 작동
```

---

## 🎯 케이스별 작성 예시 (간략판)

### 1️⃣ 버그 수정 예시

```markdown
/sc:troubleshoot --seq --validate --think
"[버그 설명]"

# 버그 수정 지시서: [제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인

## 문제 상황
- 위치: [경로]
- 증상: [설명]
- 원인: [분석]

## 🔥 실제 코드 확인 결과
- 현재 패턴: [확인된 패턴]
- 문제 코드: [실제 코드]

## 수정 내용
[구체적 수정 사항]

## 테스트 시나리오
[테스트 방법]
```

### 2️⃣ UI 개선 예시

```markdown
/sc:improve --magic --c7 --validate
"[UI 개선 내용]"

# UI 개선 지시서: [제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인

## 개선 목표
[목표 설명]

## 🔥 현재 구현 확인
- 컴포넌트: [실제 파일]
- 스타일링: [현재 방식]

## 수정 파일
[파일 목록과 변경 내용]

## 반응형 처리
[모바일/태블릿/데스크톱]
```

### 3️⃣ 기능 추가 예시

```markdown
/sc:implement --seq --validate --c7
"[기능 설명]"

# 기능 추가 지시서: [제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인

## 추가할 기능
[기능 명세]

## 🔥 기존 패턴 확인
- API 패턴: [실제 사용 중인 패턴]
- 컴포넌트 패턴: [실제 사용 중인 패턴]

## 구현 단계
[단계별 구현 계획]

## DB 스키마 (필요시)
[테이블 구조]
```

---

## 📂 대규모 작업 시 Phase 분할

### Phase별 README.md 템플릿

```markdown
# 🎯 [프로젝트명]

## 📊 현재 진행 상황
| Phase | 작업 내용 | 상태 | 시작일 | 완료일 |
|-------|----------|------|--------|--------|
| Phase 1 | [작업] | ⏳ | - | - |

## 🚀 빠른 시작 가이드
1. Phase 1부터 순차적 진행
2. 각 Phase 완료 조건 확인

## 📋 Phase 간 의존성
Phase 1 → Phase 2 → Phase 3
```

### 개별 Phase 템플릿

```markdown
/sc:[command] --[flags]
"Phase [N]: [작업]"

# Phase [N]: [제목]

⚠️ → 상단 '최우선 프로젝트 특화 규칙' 필수 확인

## 📌 Phase 정보
- Phase 번호: [N]/[전체]
- 예상 시간: [X]시간
- 우선순위: [CRITICAL/HIGH/MEDIUM/LOW]

## 🔥 실제 코드 확인
[Phase 시작 전 확인한 실제 코드 패턴]

## 🎯 Phase 목표
[목표 목록]

## 📝 작업 내용
[상세 작업]

## ✅ 완료 조건 (실제 작동 확인 필수)

### 🔴 필수 완료 조건 (하나라도 미충족 시 미완료)
```bash
# 1. 빌드 성공
- [ ] npm run build → 성공
- [ ] npm run types:check → 에러 0개

# 2. 실제 브라우저 테스트
- [ ] npm run dev → http://localhost:3000
- [ ] 작업한 기능 실제 클릭 → 동작 확인
- [ ] 개발자 도구 Console → 에러 0개
- [ ] Network 탭 → API 호출 성공

# 3. 데이터 확인
- [ ] DB 데이터 실제 저장/수정/삭제 확인
- [ ] UI에 데이터 정확히 표시
```

### 🟡 권장 완료 조건
- [ ] 로딩 상태 표시
- [ ] 에러 처리 구현
- [ ] 반응형 디자인 확인
- [ ] 성능 기준 충족 (응답 < 500ms)

## → 다음 Phase
- 파일: PHASE_[N+1]_[NAME].md
```

---

## 🔄 롤백 계획 템플릿

```markdown
## 🔄 롤백 계획

### 백업 체크리스트
- [ ] 데이터베이스 백업
- [ ] 현재 코드 커밋
- [ ] 환경 변수 백업

### 롤백 트리거 조건
- 빌드 실패 5회 이상
- 핵심 기능 작동 불가
- 데이터 무결성 위반

### 롤백 절차
1. git reset --hard [커밋해시]
2. npm install
3. DB 롤백 (필요시)

### 부분 롤백 전략
- 특정 기능만 이전 버전으로
- 점진적 롤백
```

---

## 📊 성과 측정 기준

```markdown
## 📊 성과 측정

### 정량적 지표
| 지표 | Before | After | 개선율 |
|------|--------|-------|--------|
| 응답 시간 | [ms] | [ms] | [%] |
| 에러율 | [%] | [%] | [%] |
| 번들 크기 | [KB] | [KB] | [%] |

### 정성적 지표
- [ ] 사용자 경험 개선
- [ ] 코드 가독성 향상
- [ ] 유지보수성 개선

### ROI 계산
투입 시간: [시간]
절감 효과: [시간/월]
ROI: [%]
```

---

## 🌊 Enterprise Wave Mode 가이드

### Wave Mode 활용 기준
- **활성화 조건**: 복잡도 ≥0.7 AND 파일 >20 AND 작업유형 >2
- **전략 선택**:
  - Progressive: 점진적 개선
  - Systematic: 체계적 분석
  - Adaptive: 동적 조정
  - Enterprise: 대규모 시스템

### Wave 구성 예시
```markdown
Wave 1: Discovery & Analysis
Wave 2: Planning & Design
Wave 3: Implementation
Wave 4: Validation
Wave 5: Optimization
```

---

## 🔍 지시서 품질 검증 체크리스트 (v17.0 실제 작동 중심)

### 🔴 필수 요소 체크 (하나라도 누락 시 지시서 미완성)
- [ ] SuperClaude 명령어 최상단 배치
- [ ] ⚠️ 프로젝트 특화 규칙 참조
- [ ] 구체적 파일 경로 포함
- [ ] **7단계 실제 작동 검증 시나리오 포함**
- [ ] **브라우저 테스트 방법 명시**
- [ ] **DB 데이터 확인 방법 포함**
- [ ] 롤백 계획 포함
- [ ] 🔥 실제 코드 패턴 확인 결과 포함

### 🔴 품질 기준 체크
- [ ] **실제 작동 가능성 100%** (코드만이 아닌 기능 작동)
- [ ] **npm run dev 후 테스트 가능**
- [ ] **사용자가 브라우저에서 확인 가능**
- [ ] 의도 전달 명확성
- [ ] 프로젝트 규칙 준수
- [ ] 임시방편 0개
- [ ] any 타입 0개
- [ ] 🔥 실제 코드와 일치 (v17.0)

### 실제 코드 확인 체크 (v17.0 신규)
- [ ] grep으로 현재 패턴 확인함
- [ ] 기존 파일 구조 확인함
- [ ] Import 패턴 확인함
- [ ] Git 히스토리 확인함
- [ ] 관련 CLAUDE.md 확인함

### 저장 위치
```
tasks/
└── [날짜]_[작업명]/
    └── instruction.md
```

---

## 📝 지시서 작성 실패 시 응답

```markdown
## 추가 정보 필요

### 명확히 해주세요:
1. [질문 1]
2. [질문 2]

### 확인 방법:
\`\`\`bash
[확인 명령어]
\`\`\`

### 🔥 실제 코드 확인 필요:
\`\`\`bash
grep -r "[패턴]" src/ --include="*.ts"
cat [파일경로]
\`\`\`
```

---

## 🎯 핵심 원칙 (v17.0)

1. **실행 AI는 당신의 지시서만 보고 작업합니다**
   - 프로젝트를 모르므로 구체적으로 안내
   - ⚠️ 프로젝트 특화 규칙 강조 필수
   - 🔥 실제 코드 패턴 명시 필수 (v17.0)

2. **사용자의 의도를 100% 구현하는 것이 목표**
   - 실행 가능이 아닌 의도대로 구현
   - 임시방편 없이 완전한 해결

3. **친절하고 구체적으로 작성**
   - 추상적 표현 금지
   - 실제 경로와 코드 제공
   - 🔥 실제 사용 패턴 제공 (v17.0)

4. **품질을 보증하세요**
   - 기능 동작과 사용자 경험 검증
   - 성능, 접근성, 보안 고려

5. **지시서 작성 AI도 학습 필요**
   - Step 0에서 프로젝트 컨텍스트 학습
   - CONTEXT_BRIDGE.md 필수 확인
   - 🔥 실제 코드 패턴 필수 확인 (v17.0)

6. **규모에 맞는 접근법 선택**
   - Simple: 직접 실행
   - Complex: 병렬 처리
   - Enterprise: Wave Mode

7. **프로젝트 특화 규칙 최우선**
   - 모든 지시서의 첫 번째 고려사항
   - 자동 스크립트 생성 절대 금지

8. **리스크 관리 필수**
   - 모든 중요 작업은 롤백 계획 포함
   - 실패 시 복구 절차 명시

9. **체계적 관리 필수**
   - 대규모 작업은 폴더 구조 필수
   - Phase별 독립성 보장

10. **완전성 추구**
    - 빌드 성공이 아닌 기능 완전 작동
    - 문제 발견 시 즉시 해결
    - 🔥 실제 코드와 100% 일치 (v17.0)

---

## 🔥 Phase 2 실패 교훈 (v17.0 추가)

### 실패 원인
- **추측으로 작성**: apiClient.method() 패턴 가정
- **실제 코드 미확인**: 기존 패턴 파악 실패
- **프로젝트 학습 부족**: CLAUDE.md 파일 미확인

### 예방책
1. **Step 0 필수 실행**: 프로젝트 학습 단계 생략 금지
2. **grep 필수 사용**: 실제 코드 패턴 확인
3. **가정 금지**: 확인 후 작성

### 올바른 예시
```bash
# ❌ 잘못된 접근
"API Client를 구현하면 apiClient.post()를 사용할 것이다"

# ✅ 올바른 접근
grep -r "api" src/hooks --include="*.ts" | head -10
# 결과: apiGet, apiPost 함수 사용 중
"프로젝트는 apiGet, apiPost 함수를 사용하므로 이 패턴 유지"
```

---

*이 가이드를 따라 작성한 지시서는 실행 AI가 100% 의도대로 구현할 수 있습니다.*
*v17.0: Phase 2 실패 교훈을 반영하여 실제 코드 확인을 필수화했습니다.*