# 📋 프로젝트 문서 체계 개선 계획서

*작성일: 2025-01-21*
*목적: Claude Code의 컨텍스트 유지 능력 향상을 위한 문서 구조 최적화*

---

## 🎯 개요

### 현재 문제점
- 문서 간 역할 경계 모호로 정보 중복 (총 1,958줄)
- Phase별 업데이트 누적으로 문서 비대화
- Claude Code의 세션 간 컨텍스트 손실
- 반복되는 실수 패턴 추적 부재

### 개선 목표
- **3개 문서 체계**로 단순화 (총 650줄 목표)
- 각 문서의 명확한 역할 분리
- 세션 간 작업 연속성 확보
- 반복 실수 방지 시스템 구축

---

## 📁 3개 문서 체계

| 문서 | 역할 | 핵심 질문 | 목표 크기 |
|------|------|-----------|-----------|
| **CLAUDE.md** | AI 작업 매뉴얼 | "HOW - 어떻게 작업해야 하나?" | ~150줄 |
| **PROJECT.md** | 프로젝트 현황판 | "WHAT/WHEN - 현재 상태는?" | ~200줄 |
| **CODEMAP.md** | 프로젝트 구조도 | "WHERE - 어디에 무엇이 있나?" | ~300줄 |

---

## 📝 각 문서별 상세 가이드

### 1️⃣ CLAUDE.md - AI 작업 지침서

#### 📌 문서 목적
AI(Claude Code)가 프로젝트 작업 시 따라야 할 규칙과 프로세스를 정의

#### ✏️ 작성 방법
```markdown
# 📋 문서 목적 및 업데이트 지침
- 목적: AI가 프로젝트 작업 시 따라야 할 규칙과 프로세스
- 업데이트: 새로운 작업 패턴이나 금지사항 발견 시에만
- 제외: 프로젝트 상태, 업데이트 내역, 기술 스택 정보

# ✅ 필수 행동 지침
- 작업 전 확인사항
- 코드 작성 규칙
- 파일 작업 규칙

# 🚫 절대 금지 사항
- 임의 작업 금지
- 기술 제약
- 보안 관련

# 🔧 작업 프로세스
- 기능 구현 시
- 문제 해결 시

# ❌ 실패 사례 & 안티패턴
- 이전 AI들의 실패 TOP 5
- 절대 하지 말아야 할 코드 패턴
```

#### 📏 작성 규칙
- **포함**: AI 작업 규칙, 금지사항, 프로세스, 실패 사례
- **제외**: 프로젝트 상태, 기술 스택, 업데이트 내역
- **업데이트 시기**: 새로운 작업 패턴이나 금지사항 발견 시
- **크기 제한**: 150줄 이내

---

### 2️⃣ PROJECT.md - 프로젝트 현황판

#### 📌 문서 목적
프로젝트의 현재 상태, 진행 상황, 이슈를 실시간으로 추적

#### ✏️ 작성 방법
```markdown
# 📋 문서 목적 및 업데이트 지침
- 목적: 프로젝트 현재 상태와 진행 상황
- 업데이트: 기능 완료, 이슈 발생/해결 시
- 규칙: 최근 변경사항은 7개만 유지

# 🔴 현재 작업 상태 (최상단 필수)
## 지금 작업 중
- 작업 내용: [구체적인 작업 설명]
- 작업 파일: [파일 경로와 라인 번호]
- 다음 단계: [다음에 해야 할 일]
- 테스트 방법: [테스트 URL이나 명령어]

⚠️ 중요: 작업 완료 시 이 섹션 즉시 삭제하고 새 작업으로 교체

# ⚠️ 반복 실수 추적
## TypeScript any 타입 사용 (발생 7회) 🔴
- 문제: any 타입 사용 시 빌드 실패
- 해결: unknown 타입 + 타입 가드
- 최근: 2025-01-20 (CourseDetailClient.tsx)

[색상 코드]
🔴 5회 이상 | 🟡 3-4회 | 🟢 1-2회

# 🎯 프로젝트 개요
- 프로젝트명, 목적, 도메인

# 📅 최근 변경사항 (최대 7개)
- 2025-01-21: 내용
- 2025-01-20: 내용
...

# 🐛 현재 이슈 & TODO
- [ ] 해결해야 할 문제
- [ ] 구현 예정 기능

# 🔑 환경 설정
- 필수 환경변수
- 테스트 계정 정보
```

#### 📏 작성 규칙
- **현재 작업 상태**: 
  - 항상 최상단 위치
  - **완료 즉시 삭제** (누적 금지)
  - 새 작업 시작 시 즉시 업데이트
- **반복 실수 추적**:
  - 고유 패턴으로 분류
  - 발생 횟수 누적 (삭제 X)
  - 3개월 무발생 시 제거
- **최근 변경사항**: 7개만 유지, 오래된 것 자동 삭제
- **크기 제한**: 200줄 이내

---

### 3️⃣ CODEMAP.md - 프로젝트 구조도

#### 📌 문서 목적
프로젝트의 파일/폴더 구조와 기술 스택을 한눈에 파악

#### ✏️ 작성 방법
```markdown
# 📋 문서 목적 및 업데이트 지침
- 목적: 현재 프로젝트의 파일/폴더 구조와 기술 스택
- 업데이트: 새 파일/폴더 추가 또는 구조 변경 시
- 제외: Phase별 업데이트 내역, 중복된 구조

# 🚀 빠른 시작 (최상단 필수)
## 자주 사용하는 명령어
npm run dev        # 개발 서버 (localhost:3000)
npm run build      # 빌드 테스트
npx tsc --noEmit  # TypeScript 체크

## 🔥 자주 수정하는 파일 Top 10
1. src/app/page.tsx
2. src/app/auth/callback/route.ts
3. src/lib/supabase/browser-client.ts
...

# 📁 프로젝트 구조
src/
├── app/
│   ├── (pages)/
│   ├── api/
│   └── auth/
...

# 🛠 기술 스택
- Frontend: Next.js 15.4.6, React 19.1.1
- Backend: Supabase
...

# 📊 DB 테이블 구조
- users: 사용자 정보
- courses: 강의 정보
...

# 🔗 API 엔드포인트
- GET /api/user/profile
- POST /api/courses
...
```

#### 📏 작성 규칙
- **빠른 시작 섹션**: 항상 최상단 유지
- **디렉토리 구조**: 하나의 통합된 트리만 표시
- **제외 항목**: 
  - Phase별 "새로 추가된 파일" 섹션
  - 중복된 구조 표시
  - 업데이트 내역
- **크기 제한**: 300줄 이내

---

## 🔄 반복 실수 추적 시스템

### 운영 방식
1. **패턴 분류**: 동일/유사 에러는 하나의 고유 패턴으로 관리
2. **횟수 누적**: 발생할 때마다 카운트 증가 (삭제 X)
3. **우선순위 표시**:
   - 🔴 5회 이상: 심각한 반복 실수
   - 🟡 3-4회: 주의 필요
   - 🟢 1-2회: 관찰 중
4. **제거 기준**: 3개월 이상 무발생 시

### 기록 예시
```markdown
### TypeScript any 타입 사용 (발생 7회) 🔴
- 문제: any 타입 사용 시 빌드 실패
- 해결: unknown 타입 + 타입 가드
- 최근: 2025-01-20 (CourseDetailClient.tsx)
```

---

## 📋 실행 계획

### 1단계: 백업
- 현재 3개 파일을 `.backup` 확장자로 복사
- 예: `CLAUDE.md.backup`, `PROJECT.md.backup`, `CODEMAP.md.backup`

### 2단계: CLAUDE.md 정리
- 프로젝트 개요, 기술 스택, 현재 상태 정보 제거
- AI 작업 지침과 규칙만 유지
- 목표: 206줄 → 150줄

### 3단계: PROJECT.md 재구성
- 최상단에 "현재 작업 상태" 섹션 추가
- "반복 실수 추적" 섹션 신설
- 중복된 구조 정보 제거
- 목표: 794줄 → 200줄

### 4단계: CODEMAP.md 정리
- 최상단에 "빠른 시작" 섹션 추가
- Phase별 중복 구조 제거
- 하나의 통합된 디렉토리 트리로 정리
- 목표: 958줄 → 300줄

### 5단계: 검증
- 총 라인 수: 1,958줄 → 650줄 (67% 감소)
- 각 문서 역할 명확성 확인
- 중복 정보 제거 확인

---

## ✅ 체크리스트

### 작업 전
- [ ] 현재 3개 문서 백업 완료
- [ ] 각 문서의 현재 라인 수 기록

### CLAUDE.md
- [ ] 프로젝트 정보 제거
- [ ] AI 작업 지침만 유지
- [ ] 150줄 이내 확인

### PROJECT.md
- [ ] 현재 작업 상태 최상단 배치
- [ ] 반복 실수 추적 섹션 추가
- [ ] 최근 변경사항 7개만 유지
- [ ] **완료된 작업 삭제 규칙 명시**
- [ ] 200줄 이내 확인

### CODEMAP.md
- [ ] 빠른 시작 섹션 최상단 추가
- [ ] 중복 구조 제거
- [ ] 통합 디렉토리 트리 작성
- [ ] 300줄 이내 확인

### 작업 후
- [ ] 총 라인 수 650줄 이내 확인
- [ ] 문서 간 중복 정보 없음 확인
- [ ] 각 문서 역할 명확성 확인
- [ ] 상호 참조 링크 추가

---

## 📌 핵심 원칙

1. **누적 금지**: 최근 정보만 유지 (예외: 반복 실수는 횟수만 누적)
2. **중복 금지**: 같은 정보는 한 곳에만 기록
3. **위치 고정**: 중요한 정보는 항상 최상단
4. **완료 즉시 삭제**: PROJECT.md의 현재 작업은 완료되면 **반드시 즉시 제거**
5. **크기 제한 준수**: 각 문서별 라인 수 제한 엄격 준수

---

*이 계획서를 기반으로 문서 재구조화를 진행하면 Claude Code의 컨텍스트 유지 능력이 획기적으로 개선될 것입니다.*