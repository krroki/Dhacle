# 📝 AI 지시서 작성 가이드

**목적**: AI가 E2E 작업 지시서를 작성할 때 따라야 할 명확한 규칙과 구조

---

## 🚨 절대 규칙 - 위반 시 지시서 재작성

### ❌ 금지사항
1. **V6 템플릿 구조 변경 금지** - 순서와 구조 절대 준수
2. **기술적 성공 ≠ 작업 완료** - 실제 작동만이 완료
3. **애매한 테스트 명령어 금지** - 복사-붙여넣기 가능해야 함
4. **TODO나 임시방편 금지** - 완전한 해결책만 제시

### ✅ 필수사항
1. **실제 작동 확인 우선** - 타입 에러 해결보다 중요
2. **테스트 명령어 명확성** - 즉시 실행 가능한 형태
3. **각 Phase별 검증** - 수정 즉시 테스트
4. **테스트 작성 의무화** - 작동하는 코드는 테스트로 보호

---

## 📋 필수 구조 (V6 템플릿 준수)

```markdown
# 🎯 [작업명] - [핵심 목표]

**핵심**: "[한 줄 핵심 원칙]"
**V6 확장**: "[추가 원칙]"

## ⚠️ 필수 준비사항
[포트 정리, 환경 준비]

## 🎬 사용자 시나리오 (필수)
[실제 검증할 기능 목록]

## 🔍 Phase 0: 현재 상태 파악
[현재 작동 상태 확인]

## 📂 Phase별 실행
[각 Phase별 수정 및 검증]

## 🧪 테스트 작성 (필수!)
[테스트 코드 템플릿]

## ✅ 완료 조건
[진짜 완료 vs 가짜 완료]

## 🚨 작업 종료 시 필수
[포트 정리 등]
```

---

## 🎯 테스트 명령어 작성 규칙

### 1️⃣ 복사-붙여넣기 가능한 형태

❌ **잘못된 예시**:
```markdown
타입 에러를 확인하려면 npm run types:check를 실행하세요.
```

✅ **올바른 예시**:
```bash
# 타입 에러 확인 (5초)
npm run types:check 2>&1 | head -20

# 주요 에러 파일 확인
npm run types:check 2>&1 | grep "error TS" | cut -d: -f1 | sort -u
```

### 2️⃣ 실행 순서 명시

❌ **잘못된 예시**:
```markdown
필요한 테스트들을 실행하세요.
```

✅ **올바른 예시**:
```bash
# Step 1: 타입 확인 (5초)
npm run types:check

# Step 2: 개발 서버 실행 (20초)
npm run dev
# → localhost:3000 접속
# → Console 확인 (F12)
# → Ctrl+C로 종료

# Step 3: 전체 검증 (1분)
npm run verify:parallel
```

### 3️⃣ 예상 결과와 해석 방법 포함

❌ **잘못된 예시**:
```markdown
에러가 있는지 확인하세요.
```

✅ **올바른 예시**:
```bash
# 실행
npm run types:check

# 결과 해석
# ✅ "0 errors" → Phase 완료, 다음 진행
# ❌ "15 errors" → 아래 에러 타입 확인
#    - TS2305 (import) → Phase 1로 이동
#    - TS2339 (property) → Phase 2로 이동
#    - TS7006 (any) → Phase 3로 이동
```

---

## 📂 Phase 작성 규칙

### 각 Phase 필수 포함 요소

```markdown
### Phase X: [작업명]

#### X.1 현재 문제 확인
```bash
# 문제 확인 명령어
[구체적 명령어]
```

#### X.2 수정 작업
```typescript
// 수정 전
[문제 코드]

// 수정 후
[해결 코드]
```

#### X.3 즉시 검증
```bash
# 수정 확인 명령어
[검증 명령어]

# ✅ 성공 기준
[명확한 성공 조건]
```

#### X.4 브라우저 테스트
- localhost:3000 접속
- [구체적 테스트 경로]
- Console 에러 확인
- 기능 작동 확인
```

---

## 🧪 테스트 작성 섹션 규칙

### 필수 포함 내용

```markdown
## 🧪 Phase 5: 테스트 작성 (필수!)

### 5.1 수정한 컴포넌트 테스트
```typescript
// [컴포넌트명].test.tsx
[실제 테스트 코드]
```

### 5.2 수정한 API 테스트
```typescript
// [API명].test.ts
[실제 테스트 코드]
```

### 5.3 E2E 시나리오 테스트
```typescript
// e2e/[시나리오명].spec.ts
[실제 E2E 테스트]
```
```

---

## ✅ 완료 조건 작성 규칙

### 필수 구분

```markdown
## ✅ 완료 조건

### ❌ 이것은 완료가 아님
- TypeScript 에러 0개
- 빌드 성공
- 컴파일 통과

### ✅ 이것이 진짜 완료
- [ ] TypeScript 에러 0개 AND 실제 기능 작동
- [ ] 브라우저 Console 에러 0개
- [ ] 사용자 시나리오 100% 성공
- [ ] 테스트 코드 작성 및 통과
```

---

## 📝 지시서 작성 체크리스트

### 작성 전
- [ ] V6 템플릿 구조 확인
- [ ] 작업 목표 명확히 정의
- [ ] 현재 문제 상태 파악

### 작성 중
- [ ] 복사-붙여넣기 가능한 명령어
- [ ] 실행 순서 명시 (Step 1, 2, 3...)
- [ ] 예상 결과와 해석 방법 포함
- [ ] 각 Phase별 즉시 검증 추가
- [ ] 브라우저 테스트 포함

### 작성 후
- [ ] 모든 명령어 실행 가능 확인
- [ ] 완료 조건 명확성 확인
- [ ] 테스트 작성 섹션 포함 확인
- [ ] 포트 정리 명령어 포함 확인

---

## 🚫 흔한 실수 방지

### 1. 기술적 완료 착각
❌ "TypeScript 에러 0개면 완료"
✅ "사용자가 클릭했을 때 작동해야 완료"

### 2. 애매한 테스트 지시
❌ "테스트를 실행하세요"
✅ "npm run test:component AlertRules"

### 3. 검증 없는 수정
❌ 수정 → 수정 → 수정 → 테스트
✅ 수정 → 테스트 → 수정 → 테스트

### 4. 테스트 작성 누락
❌ 기능 구현만 하고 끝
✅ 기능 구현 + 테스트 작성 필수

---

## 📊 좋은 지시서 예시

```markdown
# 🎯 로그인 기능 E2E 구현

**핵심**: "로그인 버튼 클릭 시 실제 로그인 되어야 완료"
**V6 확장**: "로그인 기능은 E2E 테스트로 보호"

## ⚠️ 필수 준비사항

```bash
# 포트 정리
netstat -ano | findstr :3000
taskkill /F /PID [ID]
```

## 🎬 사용자 시나리오
1. localhost:3000/login 접속
2. 테스트 로그인 버튼 클릭
3. /mypage로 리다이렉트
4. 프로필 정보 표시

## 🔍 Phase 0: 현재 상태 파악

```bash
# 서버 실행 및 테스트
npm run dev
# localhost:3000/login 접속
# 로그인 버튼 클릭 → 실제 동작 확인
```

[이하 Phase별 구체적 내용...]
```

---

## 🎯 최종 점검

지시서 작성 완료 후 자문:
1. **개발자가 이 지시서만 보고 작업 가능한가?**
2. **테스트 명령어를 즉시 실행 가능한가?**
3. **실제 작동 확인이 포함되어 있는가?**
4. **테스트 작성이 의무화되어 있는가?**

모두 "예"라면 완성된 지시서입니다.

---

*이 가이드는 V6 템플릿 구조를 준수하며 테스트 실행 명확성을 최우선으로 합니다.*