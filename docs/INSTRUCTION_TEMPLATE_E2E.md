# 🎯 E2E 실행 지시서 템플릿 V5 - 실제 작동 강제

**핵심**: "사용자가 클릭했을 때 작동하지 않으면 완료가 아니다"

---

## ⚠️ 필수 준비사항

```markdown
## 시작 전 체크리스트
1. **포트 정리**: 3000-3010 포트 확인 및 정리
   - Windows: netstat -ano | findstr :300
   - 프로세스 종료: taskkill /F /PID [ID]

2. **로그인 준비**: 
   - 개발 모드: "🧪 테스트 로그인" 버튼 사용
   - 프로덕션: 실제 OAuth 로그인

3. **종료 규칙**: 
   - 테스트 끝나면 반드시 Ctrl+C
   - 포트 재확인 및 정리
```

---

## 📝 지시서 구조

```markdown
/sc:implement --e2e --validate --evidence
"[기능명] - 사용자 시나리오 구현"

# [작업 제목] 

## 🎬 사용자 시나리오 (필수)
1. 사용자가 localhost:3000 접속
2. [테스트 로그인 버튼] 클릭 (개발 모드)
3. [예상 동작] 확인
4. 실패 시: [에러 화면/메시지]
```

---

## 🔍 Phase 0: 현재 상태 파악

```bash
# 1. 포트 정리 (필수!)
netstat -ano | findstr :3000
taskkill /F /PID [프로세스ID]

# 2. 서버 실행
npm run dev

# 3. 브라우저 열기
localhost:3000

# 4. 테스트 로그인
- "🧪 테스트 로그인" 버튼 찾기
- 클릭 → 자동 로그인

# 5. 실제로 클릭해보기
- 어떤 버튼이 작동하는가?
- 어떤 기능이 안 되는가?
- Console 에러는 무엇인가?
```

---

## 📂 Phase 실행 (기능별)

### Phase 1: 기능 매핑
```markdown
## 작업할 기능
- [ ] 로그인 → 실제 작동?
- [ ] 회원가입 → 실제 작동?
- [ ] 프로필 수정 → 실제 작동?
- [ ] 결제 → 실제 작동?

## 우선순위
1. 핵심 기능부터 (로그인/회원가입)
2. 주요 비즈니스 로직
3. 부가 기능
```

### Phase 2: 기능별 E2E 구현
```markdown
## 기능: [로그인]

### 1. 현재 상태
- localhost:3000/login 접속
- 이메일/패스워드 입력
- 로그인 버튼 클릭
- 결과: [성공/실패/에러]

### 2. 문제 파악
```bash
# Console 확인
# Network 탭 확인
# 실제 에러 메시지
```

### 3. 수정
- API Route 수정
- UI 컴포넌트 수정
- DB 연결 확인

### 4. 검증
- 다시 로그인 시도
- 성공할 때까지 반복
```

---

## ⚡ 실제 작동 검증 체크리스트

```markdown
## 필수 확인 사항
### Frontend
- [ ] 페이지 로드 성공
- [ ] 버튼 클릭 가능
- [ ] 폼 제출 작동
- [ ] 에러 메시지 표시
- [ ] 로딩 상태 표시

### API
- [ ] 200/201 응답
- [ ] 에러 시 적절한 메시지
- [ ] 세션/쿠키 생성
- [ ] DB 데이터 저장

### Database
- [ ] 테이블 존재
- [ ] 데이터 저장됨
- [ ] 관계 정상 작동

### User Flow
- [ ] 전체 플로우 완주 가능
- [ ] 새로고침 후에도 유지
- [ ] 로그아웃/재로그인 가능
```

---

## 🚫 절대 규칙

```markdown
## ⛔ 금지 사항
1. 타입 에러만 고치고 "완료" → ❌
2. 컴파일 성공 = 완료 → ❌
3. TODO 주석 남기기 → ❌
4. 실제 테스트 없이 커밋 → ❌

## ✅ 필수 사항
1. 실제 브라우저에서 테스트
2. 사용자 시나리오 완주
3. Console 에러 0개
4. Network 정상 응답
```

---

## 📊 진짜 성공 기준

```markdown
## 완료의 정의

### ❌ 이것은 완료가 아님
- TypeScript 에러 0개
- 빌드 성공
- 테스트 통과

### ✅ 이것이 진짜 완료
- 사용자가 실제로 로그인 가능
- 결제가 실제로 처리됨
- 데이터가 실제로 저장됨
- 새로고침 후에도 작동
```

---

## 🔄 문제 해결 프로세스

```markdown
## 에러 발생 시

1. **증상 수집**
   - Console 에러 전체
   - Network 실패 내용
   - 화면 상태

2. **원인 분석**
   - DB 테이블 있나?
   - API Route 구현됐나?
   - 환경변수 설정됐나?

3. **수정 & 재시도**
   - 근본 원인 해결
   - 다시 테스트
   - 작동할 때까지 반복
```

---

## 📝 사용 예시

```markdown
/sc:implement --e2e --validate
"로그인 기능 테스트 및 수정"

# 로그인 E2E 구현

## 🎬 사용자 시나리오
1. localhost:3000/auth/login 접속
2. "🧪 테스트 로그인" 버튼 클릭 (개발 모드)
3. 자동 로그인 처리
4. /mypage/profile 리다이렉트
5. 프로필 정보 표시

## 현재 문제
- 테스트 로그인 버튼 없음
- 카카오 로그인만 있어서 localhost 테스트 불가

## 해결
1. 테스트 로그인 버튼 추가 (개발 모드)
2. /api/auth/test-login 라우트 생성
3. 실제 테스트 후 확인
```

---

## 🎯 범용 에러 패턴 (예시일 뿐)

```markdown
## 일반적인 문제들
- DB 테이블 없음 → CREATE TABLE
- API Route 미구현 → 완전 구현
- 환경변수 누락 → .env.local 확인
- 권한 에러 → RLS 정책 확인
- CORS 에러 → API 설정 확인
```

---

## 🚨 작업 종료 시 필수

```markdown
## 반드시 실행할 것
1. **서버 종료**: Ctrl + C
2. **포트 확인**: netstat -ano | findstr :300
3. **프로세스 정리**: taskkill /F /PID [ID]
4. **3000-3010 모든 포트 확인**

⚠️ 이거 안하면 다음에 포트 충돌로 개고생
```

---

*V5: E2E 중심 | 실제 작동 | 사용자 경험 최우선*
*중요: 포트 정리 필수! 테스트 로그인 사용!*