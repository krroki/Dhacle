# 📝 AI 지시서 작성 템플릿 v7.1

*실제로 작동하는 간결한 지시서 작성 시스템*

---

## 🎯 핵심 원칙

1. **정보 부족 시 합리적 가정**: 프로젝트 컨텍스트 기반으로 빈 곳 채우기
2. **3단계로 단순화**: 파악 → 계획 → 지시서
3. **실제 코드 제공**: 주석이 아닌 작동하는 코드
4. **최소 질문**: 꼭 필요한 것만 물어보기
5. **가정 명시**: 추측한 부분은 "가정:" 표시

---

## 📋 3단계 프로세스

### 1단계: 파악 (1분)
```markdown
요청: "[원문 그대로]"
시간: [접수 시각]
컨텍스트: [이전 대화 있으면 참조]

이해한 내용:
- 작업: [구체적 작업]
- 위치: [파일/컴포넌트] (가정: 프로젝트 구조 기반)
- 목적: [왜 필요한지] (가정: 일반적 용도)
- 긴급도: [높음/보통/낮음]

필요 정보:
□ 충분 → 2단계로
□ 부족 → 핵심 1개만 질문
```

### 2단계: 계획 (2분)
```markdown
작업 유형: [기능추가|버그수정|개선|분석|설정|DB작업]

영향 범위:
- 주요 파일: [구체적 경로]
- 연관 파일: [영향받는 파일들]
- 리스크: [낮음|중간|높음]

구현 순서:
1. [준비 작업]
2. [메인 작업]
3. [검증 작업]
```

### 3단계: 지시서 작성 (2분)
```markdown
## 📋 작업 지시서

### 요약
[한 문장으로 작업 설명]

### 사전 준비
\`\`\`bash
# 백업
cp [대상] [대상].backup.$(date +%Y%m%d_%H%M%S)

# 브랜치 생성 (선택)
git checkout -b feature/[작업명]
\`\`\`

### 구현
\`\`\`typescript
// 파일: [전체 경로]
// 위치: [라인 번호 또는 함수명 근처]

// === 수정 전 ===
const oldCode = "실제 기존 코드";

// === 수정 후 ===
const newCode = "실제 새 코드";
\`\`\`

### 검증
\`\`\`bash
# 1. 타입 체크
npx tsc --noEmit

# 2. 빌드
npm run build

# 3. 테스트 (있으면)
npm test -- [관련 테스트 파일]

# 4. 실행 확인
npm run dev
# → 브라우저: http://localhost:3000/[경로]
# → 확인사항: [구체적 동작]
\`\`\`

### 문제 발생 시
\`\`\`bash
# 롤백
cp [파일].backup.* [파일]

# 또는 Git 사용 시
git checkout -- [파일]
\`\`\`
```

---

## 🔨 작업 유형별 상세 템플릿

### 🆕 기능 추가
```markdown
1. 타입 정의
   - 파일: src/types/index.ts
   - 인터페이스 추가

2. API 엔드포인트 (필요시)
   - 파일: src/app/api/[기능]/route.ts
   - 인증 체크 포함

3. UI 컴포넌트
   - 파일: src/components/[기능]/[컴포넌트].tsx
   - shadcn/ui 우선 사용

4. 페이지 연결
   - 파일: src/app/[경로]/page.tsx
```

### 🐛 버그 수정
```markdown
1. 에러 재현
   - 단계: [재현 방법]
   - 에러: [정확한 메시지]

2. 원인 분석
   - 파일: [경로:라인]
   - 원인: [구체적 설명]

3. 수정
   - 코드: [실제 수정 코드]

4. 회귀 방지
   - 테스트: [추가할 테스트]
```

### 📊 개선/최적화
```markdown
1. 현재 측정
   - 지표: [현재값]
   - 측정방법: [명령어]

2. 목표
   - 지표: [목표값]
   - 개선율: [%]

3. 구현
   - 방법: [구체적 기법]
   - 코드: [실제 코드]

4. 결과 측정
   - 동일한 측정방법 사용
```

### 🗄️ DB 작업
```markdown
1. 마이그레이션 파일
   - 경로: supabase/migrations/[날짜]_[작업].sql
   
2. SQL 실행
   \`\`\`sql
   -- 테이블 수정
   ALTER TABLE users ADD COLUMN phone_number TEXT;
   
   -- RLS 정책 (필수)
   CREATE POLICY "users_phone_policy" ON users
   FOR ALL USING (auth.uid() = user_id);
   \`\`\`

3. 타입 갱신
   \`\`\`bash
   npm run types:generate
   \`\`\`

4. 코드 수정
   - src/types/index.ts 업데이트
```

### 🔒 보안 작업
```markdown
1. 취약점 스캔
   \`\`\`bash
   npm run security:test
   \`\`\`

2. 발견된 이슈
   - [이슈 목록]

3. 수정 사항
   - 입력 검증: Zod 스키마 추가
   - XSS 방지: DOMPurify 적용
   - 인증: 세션 체크 강화

4. 재검증
   \`\`\`bash
   npm run security:test
   \`\`\`
```

---

## ❓ 정보 부족 시 질문 (최대 1개)

### 컨텍스트 불명확
```markdown
이전 대화를 찾을 수 없습니다.
"그거"가 무엇을 지칭하는지 알려주세요:

최근 작업하신 내용:
A) [최근 수정 파일 1]
B) [최근 수정 파일 2]
C) 기타: ___
```

### 위치 불명확
```markdown
어느 위치에 추가할까요?

일반적인 위치:
A) 헤더 (상단 메뉴)
B) 사이드바 (좌측 메뉴)
C) 페이지 본문
D) 기타: ___
```

### 동작 불명확
```markdown
어떤 오류인가요?

A) 에러 메시지 표시
B) 아무 반응 없음
C) 페이지 새로고침
D) 기타: ___
```

---

## ⚠️ 주의사항

### 절대 하지 말 것
- ❌ "~것 같습니다" → ✅ "가정: ~로 진행"
- ❌ "확인했습니다" (실제로 안 함) → ✅ "확인 필요"
- ❌ 불필요한 Phase 나열 → ✅ 필요한 것만
- ❌ 모호한 지시 → ✅ 복사-붙여넣기 가능한 코드

### 반드시 할 것
- ✅ 실제 파일 경로 제공
- ✅ 실제 실행 가능한 명령어
- ✅ 롤백 방법 명시
- ✅ 가정한 부분 표시

---

## 📊 성공 기준

지시서 따라했을 때:
- [ ] 에러 없이 빌드 성공
- [ ] 요청한 기능 정상 작동
- [ ] 기존 기능 영향 없음
- [ ] 롤백 가능

---

*v7.1 - 실용적이고 검증 가능한 지시서*